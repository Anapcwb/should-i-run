(this["webpackJsonpshoud-i-run"]=this["webpackJsonpshoud-i-run"]||[]).push([[0],[,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/loadingLogo.f2a5bd12.svg"},,function(e,t,n){e.exports=n.p+"static/media/Icon-material-cancel.3193678a.svg"},function(e,t,n){e.exports=n.p+"static/media/headerLogo.4a08fb65.svg"},function(e,t,n){e.exports=n(56)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(8),o=n.n(i),r=(n(28),n(1)),c=n(2),l=n(4),u=n(3),m=n(5),h=n(19),d=n.n(h),p=(n(29),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log(this.props),s.a.createElement("div",{className:"loading"},s.a.createElement("div",{className:"loadingTitle"},s.a.createElement("h1",null,"Should I Run?")),s.a.createElement("div",{className:"loadingLogo"},s.a.createElement("img",{src:d.a,className:"stylingLoadingLogo",alt:"logo"})),this.props.message&&s.a.createElement("div",{className:"loadingMessage"},this.props.message),s.a.createElement("div",{className:"loadingCopyright"},s.a.createElement("p",null,"\xa9 Wild Devs London 2019")))}}]),t}(a.Component)),g=n(20),v=n.n(g);n(51);var f=function(e){return s.a.createElement("div",{id:"buttonDiv"},s.a.createElement("button",{onClick:e.handleClick,className:"btn ".concat(e.color)},e.text))};n(18);var b=function(e){return s.a.createElement("div",{className:"controls"},s.a.createElement(f,{handleClick:e.onSetTimer,text:"NEW SESSION",color:"blue"}))};function S(e){return e*Math.PI/180}function E(e){return e/3600}function k(e,t,n){return function(e,t){var n=(t=Math.round((t-Date.now())/1e3))*E(1),a=300*E(1),s=2*n;return e<.8*n?0:e>n?e<(s+=a)?2:3:1}(function(e,t,n,a){var s=S(n-e),i=S(a-t);e=S(e),n=S(n);var o=Math.sin(s/2)*Math.sin(s/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(e)*Math.cos(n);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}(t.lat,t.lng,n.lat,n.lng),e)}var y=["You better head back now if you want to make it back in time","You can make it back in time, BUT ONLY IF YOU RUN!!!","Sorry, you wont make it back in time before your parking expires :("],O=["You need to enable location services, this is performed in your device settings!","Location unavailable, please check your internet connection!","Location unavailable, unable to access geo location services!"],M={increment:2e-6,totalSteps:1500,currentStep:0,direction:"forwards"},j=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={timer:{hours:0,minutes:0,seconds:0},messageSeverity:0},n.intervalID=0,n.dispatchMessages=function(){var e=k(n.props.expiryTime,n.props.currentLocation,n.props.storedLocation);e>n.state.messageSeverity&&(n.setState({messageSeverity:e}),n.props.addMessage(Date.now(),y[e-1]))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"formatAndDisplayTimer",value:function(e){var t,n,a,s,i,o=this;this.intervalID=setInterval((function(){if(o.dispatchMessages(),n=Date.now(),t=e-n,e<=n)return clearInterval(o.intervalID),void o.setState({time:{hours:"00",minutes:"00",seconds:"00"}});i=Math.floor(t/1e3%60),s=Math.floor(t/6e4%60),a=Math.floor(t/36e5%24),i=i<10?"0"+i:i,s=s<10?"0"+s:s,a=a<10?"0"+a:a,o.setState({timer:{hours:a,minutes:s,seconds:i}})}),200)}},{key:"componentDidMount",value:function(){this.formatAndDisplayTimer(this.props.expiryTime),this.props.addMessage(this.props.expiryTime,"Your parking time has run out!"),this.props.addMessage(function(e){var t=e-Date.now();return t*=.95,(t=Math.round(t-3e5))<0&&(t=0),t+Date.now()}(this.props.expiryTime),"Your parking time is running out!")}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID),this.props.removeMessages()}},{key:"render",value:function(){var e=this.state.timer,t=e.hours,n=e.minutes,a=e.seconds;return s.a.createElement("div",{className:"controls"},s.a.createElement("div",{className:"clock"},"".concat(t,":").concat(n,":").concat(a)),s.a.createElement(f,{handleClick:this.props.onClearSession,text:"DISMISS",color:"red"}))}}]),t}(s.a.Component),T=(n(6),n(7),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){var t=e.target.value,a=t.split(":");"00"===a[0]&&a[1]<10&&(a[1]="10",t="00:10");var s,i,o=(s=a[0],i=a[1],36e5*s+6e4*i+Date.now());n.setState({duration:t}),n.props.setTime(o)},n.state={duration:"01:00"},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"timer"},s.a.createElement("input",{className:"inputButtonBox",type:"time",id:"startTime",value:this.state.duration,onChange:this.handleInput}))}}]),t}(a.Component)),N=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){var t=e.target.value.split(":"),a=function(e,t){var n=36e5*e;n+=6e4*t;var a=new Date,s=a.getHours(),i=a.getMinutes();return e<s?n+a.setHours(0,0,0,0)+864e5:e===s&&t<i?n+a.setHours(0,0,0,0)+864e5:n+a.setHours(0,0,0,0)}(t[0],t[1]);n.setState({expiration:e.target.value}),n.props.setTime(a)},n.state={expiration:n.getDefaultExpiration()},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getDefaultExpiration",value:function(){var e=new Date;e.setHours(e.getHours()+1);var t=e.getHours(),n=e.getMinutes();return t<10&&(t="0"+t),n<10&&(n="0"+n),t+":"+n}},{key:"render",value:function(){return s.a.createElement("div",{className:"timer"},s.a.createElement("input",{className:"inputButtonBox",type:"time",id:"startTime",value:this.state.expiration,onChange:this.handleInput}))}}]),t}(a.Component),w=n(21),x=n.n(w);var I=function(e){return s.a.createElement("div",{className:"close-button"},s.a.createElement("img",{src:x.a,alt:"close button",onClick:e.handleClick}))},L=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={isDuration:!0,unixExp:Date.now()+36e5},n.setTime=function(e){n.setState({unixExp:e})},n.toggleButton=function(){n.setState({isDuration:!n.state.isDuration})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderInput",value:function(){return this.state.isDuration?s.a.createElement(T,{setTime:this.setTime}):s.a.createElement(N,{setTime:this.setTime})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"backgroundPosition"},s.a.createElement("div",{className:"closeBtn"},s.a.createElement(I,{handleClick:this.props.onClearSession})),this.renderInput(),s.a.createElement("div",{className:"container"},s.a.createElement("div",null,s.a.createElement("label",{className:"aroundToogleButton"},"Set Duration")),s.a.createElement("div",null,s.a.createElement("label",{className:"switch"},s.a.createElement("input",{type:"checkbox",onClick:function(){return e.toggleButton()}}),s.a.createElement("span",{className:"slider round"}))),s.a.createElement("div",null,s.a.createElement("label",{className:"aroundToogleButton"},"Set Expiry"))),s.a.createElement(f,{className:"btn btn-primary",text:"START",color:"blue",handleClick:function(){return e.props.onStartSession(e.state.unixExp)}}))}}]),t}(a.Component);n(52);var C=function(e){return s.a.createElement("div",null,s.a.createElement("img",{className:"marker",src:e.img_src,alt:e.title}))},D=(n(53),Object({NODE_ENV:"production",PUBLIC_URL:""}).GOOGLE_API_KEY),B=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).center={lat:n.props.lat,lng:n.props.lng},n.setTimer=function(){n.setState({status:"setTimer"})},n.clearSession=function(){n.setState({status:"noSession"})},n.startSession=function(e){n.setState({status:"inSession",sessionStartLocation:{lat:n.props.lat,lng:n.props.lng},expiryTime:e})},n.createMapOptions=function(){return{zoomControl:!1,fullscreenControl:!1}},n.state={status:"noSession",inputTimes:null,sessionStartLocation:{lat:null,lng:null},expiryTime:0},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderControls",value:function(){return"setTimer"===this.state.status?s.a.createElement(L,{onClearSession:this.clearSession,onStartSession:this.startSession,onSetExpiry:this.setExpiry}):"inSession"===this.state.status?s.a.createElement(j,{onClearSession:this.clearSession,expiryTime:this.state.expiryTime,addMessage:this.props.addMessage,removeMessages:this.props.removeMessages,storedLocation:this.state.sessionStartLocation,currentLocation:{lat:this.props.lat,lng:this.props.lng}}):s.a.createElement(b,{onSetTimer:this.setTimer})}},{key:"renderMarkers",value:function(e){if(null!==e)return e.map((function(e){return s.a.createElement(C,{key:e.title,lat:e.lat,lng:e.lng,img_src:e.icon})}))}},{key:"render",value:function(){var e=[{title:"Current Location",lat:this.props.lat,lng:this.props.lng,icon:"https://i.imgur.com/9Fho7kq.png"}];return"inSession"===this.state.status&&e.unshift({title:"Stored Location",lat:this.state.sessionStartLocation.lat,lng:this.state.sessionStartLocation.lng,icon:"https://i.imgur.com/4lwh63l.png"}),s.a.createElement("div",{id:"map"},s.a.createElement(v.a,{options:this.createMapOptions,bootstrapURLKeys:{key:D},defaultCenter:this.center,defaultZoom:16},this.renderMarkers(e)),this.renderControls())}}]),t}(a.Component),W=(n(54),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"styleMessageContainer"},s.a.createElement("div",{className:"styleMessage"},s.a.createElement(I,{handleClick:this.props.msgButton}),s.a.createElement("p",null,this.props.msg)))}}]),t}(a.Component)),R=n(22),P=n.n(R),A=(n(55),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"headerTitle"},s.a.createElement("h1",null,"Should I Run?")),s.a.createElement("div",{className:"headerLogo"},s.a.createElement("img",{src:P.a,className:"stylingHeaderLogo",alt:"logo"}))))}}]),t}(a.Component)),H=function e(t){var n=this;Object(r.a)(this,e),this.position={error:{},lat:null,lng:null,unixtime:null},this.onPositionReceived=function(e){n.position.lat=e.coords.latitude,n.position.lng=e.coords.longitude,n.position.unixtime=Date.now(),"test"===n.mode&&n.squareWalk()},this.locationNotReceived=function(e){n.position.error=e,"test"===n.mode&&(n.position.lat=51.5,n.position.lng=-.127,n.squareWalk())},this.getLocation=function(){navigator.geolocation&&(navigator.geolocation.getCurrentPosition(n.onPositionReceived,n.locationNotReceived),"test"!==n.mode&&(n.watchID=navigator.geolocation.watchPosition(n.onPositionReceived,n.locationNotReceived)))},this.clearPositionWatch=function(){navigator.geolocation.clearWatch(n.watchID)},this.squareWalk=function(){n.intervalID=setInterval((function(){return n.intervalWalk()}),100)},this.intervalWalk=function(){M.currentStep<M.totalSteps?("forwards"===M.direction||"backwards"===M.direction?n.position.lat="forwards"===M.direction?n.position.lat+=M.increment:n.position.lat-=M.increment:"left"!==M.direction&&"right"!==M.direction||(n.position.lng="left"===M.direction?n.position.lng+=M.increment:n.position.lng-=M.increment),M.currentStep+=1):(M.currentStep=0,M.direction="forwards"===M.direction?"left":"left"===M.direction?"backwards":"backwards"===M.direction?"right":"forwards")},this.clearSquareWalk=function(){clearInterval(n.interval)},this.mode=t,this.getLocation()},Y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).setLocation=function(){var e={};e.lat=n.location.position.lat,e.lng=n.location.position.lng,n.setState({location:e}),n.setState({isLoading:!1})},n.removeMessage=function(){var e=n.state.messages.findIndex((function(e){return e.id===n.state.messageIdToSend}));n.state.messages.splice(e,1),n.setState({messageToSend:""})},n.clearMessages=function(){n.setState({messageToSend:""}),n.setState({messages:[]})},n.addMessage=function(e,t){var a={id:Math.round(1e9*Math.random()),time:e,content:t};n.state.messages.push(a)},n.state={location:{lat:null,lng:null,time:null,errorMessage:""},isLoading:!0,messageToSend:"",messageIdToSend:0,messages:[]},n.location=new H("test"),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.scheduledTasksInterval()}),1e3)}},{key:"scheduledTasksInterval",value:function(){this.checkMessage(),this.checkLocation()}},{key:"checkLocation",value:function(){null!==this.location.position.lat&&this.setLocation(),this.location.position.error.code&&this.setState({location:{errorMessage:O[this.location.position.error.code-1]}})}},{key:"getActiveScreen",value:function(){return this.state.isLoading?s.a.createElement(p,{message:this.state.location.errorMessage}):s.a.createElement(s.a.Fragment,null,s.a.createElement(A,null),s.a.createElement(B,{lat:this.state.location.lat,lng:this.state.location.lng,timestamp:this.state.location.time,removeMessages:this.clearMessages,addMessage:this.addMessage}))}},{key:"checkMessage",value:function(){for(var e=0;e<this.state.messages.length;e++)this.state.messages[e].time<Date.now()&&this.setState({messageToSend:this.state.messages[e].content,messageIdToSend:this.state.messages[e].id})}},{key:"renderMessage",value:function(){if(""!==this.state.messageToSend)return s.a.createElement(W,{msgButton:this.removeMessage,msg:this.state.messageToSend})}},{key:"render",value:function(){return s.a.createElement("div",{className:"styleApp"},this.getActiveScreen(),this.state.isLoading?null:this.renderMessage())}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[23,1,2]]]);
//# sourceMappingURL=main.cccdb663.chunk.js.map